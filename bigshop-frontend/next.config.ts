/**
 * =============================================================================
 * КОНФИГУРАЦИЯ NEXT.JS ПРИЛОЖЕНИЯ
 * =============================================================================
 * Этот файл настраивает параметры Next.js для BigShop frontend приложения.
 * Включает оптимизацию изображений, настройки сборки и другие параметры.
 */

import type { NextConfig } from "next";

/**
 * Основная конфигурация Next.js для BigShop e-commerce приложения.
 * 
 * Настройки:
 * - Оптимизация изображений с внешних доменов
 * - Форматы изображений для лучшей производительности
 * - Безопасность загрузки внешних ресурсов
 */
const nextConfig: NextConfig = {
  images: {
    /**
     * Разрешенные внешние домены для изображений.
     * Next.js блокирует внешние изображения по умолчанию для безопасности.
     * Здесь мы явно разрешаем доверенные источники.
     */
    remotePatterns: [
      {
        protocol: 'https',
        hostname: 'images.unsplash.com', // Высококачественные изображения товаров
        port: '',
        pathname: '/**', // Разрешаем все пути на этом домене
      },
      {
        protocol: 'https', 
        hostname: 'supabase-storage-url', // Для будущих изображений из Supabase Storage
        port: '',
        pathname: '/**',
      },
    ],
    
    /**
     * Современные форматы изображений для оптимизации.
     * 
     * - WebP: ~25-30% меньше размер чем JPEG при том же качестве
     * - AVIF: ~50% меньше размер, но поддерживается не всеми браузерами
     * 
     * Next.js автоматически выбирает лучший формат для каждого браузера.
     */
    formats: ['image/webp', 'image/avif'],
  },
};

export default nextConfig;
